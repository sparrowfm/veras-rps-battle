<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>VERA'S ROCK PAPER SCISSORS BATTLE</title>
    <meta name="title" content="Vera's Rock Paper Scissors Battle - Because ChatGPT Can't Play Fair">
    <meta name="description" content="A brutalist web game where the computer actually commits to its choice before you pick. Built because ChatGPT can't play Rock Paper Scissors fairly. Play now!">
    <meta name="keywords" content="rock paper scissors, web game, brutalist design, ChatGPT limitations, online game, free game, RPS battle">
    <meta name="author" content="Neel Ketkar">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://d2m7mlcoklgntq.cloudfront.net">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- PWA Icons -->
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512x512.png">

    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Vera's RPS">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://d2m7mlcoklgntq.cloudfront.net">
    <meta property="og:title" content="Vera's Rock Paper Scissors Battle">
    <meta property="og:description" content="A brutalist web game where the computer actually plays fair. Built because ChatGPT can't commit to a choice before seeing yours.">
    <meta property="og:site_name" content="Vera's Rock Paper Scissors Battle">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://d2m7mlcoklgntq.cloudfront.net">
    <meta name="twitter:title" content="Vera's Rock Paper Scissors Battle">
    <meta name="twitter:description" content="A brutalist web game where the computer actually plays fair. Try to beat the computer at Rock Paper Scissors!">

    <!-- Structured Data / JSON-LD for GenAI -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Vera's Rock Paper Scissors Battle",
      "description": "A brutalist web-based Rock Paper Scissors game where the computer randomly selects its choice before the player, ensuring fair gameplay. Features session and persistent scoring using localStorage.",
      "url": "https://d2m7mlcoklgntq.cloudfront.net",
      "applicationCategory": "Game",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Person",
        "name": "Neel Ketkar",
        "url": "https://sparrowfm.github.io/sparrow/"
      },
      "inLanguage": "en-US",
      "keywords": ["rock paper scissors", "web game", "brutalist", "free game", "online game"],
      "browserRequirements": "Requires JavaScript enabled"
    }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* CSS Variables for Theme System */
        body[data-theme="brutalist"] {
            --bg-color: #fff;
            --text-color: #000;
            --border-color: #000;
            --button-bg: #fff;
            --button-text: #000;
            --button-hover-bg: #000;
            --button-hover-text: #fff;
            --accent-bg: #000;
            --accent-text: #fff;
            --border-width: 5px;
            --border-radius: 0;
            --box-shadow: none;
        }

        body[data-theme="y2k"] {
            --bg-color: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            --text-color: #000;
            --border-color: #ff00ff;
            --button-bg: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            --button-text: #fff;
            --button-hover-bg: linear-gradient(135deg, #ff00ff 0%, #ff6ec7 100%);
            --button-hover-text: #fff;
            --accent-bg: linear-gradient(135deg, #ff00ff 0%, #ff6ec7 100%);
            --accent-text: #fff;
            --border-width: 3px;
            --border-radius: 20px;
            --box-shadow: 0 8px 20px rgba(255, 0, 255, 0.3);
        }

        body[data-theme="neon"] {
            --bg-color: #0f0f23;
            --text-color: #00ff9f;
            --border-color: #00ff9f;
            --button-bg: #1a1a3e;
            --button-text: #00ff9f;
            --button-hover-bg: #00ff9f;
            --button-hover-text: #0f0f23;
            --accent-bg: #ff00ff;
            --accent-text: #0f0f23;
            --border-width: 3px;
            --border-radius: 10px;
            --box-shadow: 0 0 20px rgba(0, 255, 159, 0.5);
        }

        body {
            font-family: 'Courier New', monospace;
            background: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
            line-height: 1.6;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        body[data-theme="y2k"] {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        body[data-theme="neon"] {
            background: #0f0f23;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            display: flex;
            gap: 8px;
        }

        .theme-btn {
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            font-weight: 900;
            padding: 10px 15px;
            border: var(--border-width) solid var(--border-color);
            background: var(--button-bg);
            color: var(--button-text);
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            transition: all 0.2s ease;
        }

        body[data-theme="y2k"] .theme-btn {
            background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            backdrop-filter: blur(10px);
        }

        body[data-theme="neon"] .theme-btn {
            text-shadow: 0 0 10px var(--text-color);
        }

        .theme-btn:hover {
            background: var(--button-hover-bg);
            color: var(--button-hover-text);
            transform: translateY(-2px);
        }

        body[data-theme="neon"] .theme-btn:hover {
            box-shadow: 0 0 30px var(--border-color);
        }

        .theme-btn:active {
            transform: translateY(1px);
        }

        .theme-btn.active {
            background: var(--accent-bg);
            color: var(--accent-text);
        }

        body[data-theme="y2k"] .theme-btn.active {
            background: linear-gradient(135deg, #ff00ff 0%, #ff6ec7 100%);
        }

        body[data-theme="neon"] .theme-btn.active {
            background: var(--accent-bg);
            box-shadow: 0 0 30px var(--accent-bg);
        }

        @media (max-width: 768px) {
            .theme-toggle {
                top: 10px;
                right: 10px;
                gap: 5px;
            }

            .theme-btn {
                font-size: 0.6rem;
                padding: 8px 10px;
            }
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 900;
            border: 6px solid var(--border-color);
            padding: 15px;
            margin-bottom: 8px;
            text-align: center;
            letter-spacing: 3px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        body[data-theme="y2k"] h1 {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
            backdrop-filter: blur(10px);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        body[data-theme="neon"] h1 {
            text-shadow: 0 0 20px var(--text-color), 0 0 40px var(--text-color);
            animation: neonPulse 2s ease-in-out infinite;
        }

        @keyframes neonPulse {
            0%, 100% { text-shadow: 0 0 20px var(--text-color), 0 0 40px var(--text-color); }
            50% { text-shadow: 0 0 30px var(--text-color), 0 0 60px var(--text-color); }
        }

        .tagline {
            font-size: 0.85rem;
            font-weight: 700;
            text-align: center;
            padding: 10px;
            margin-bottom: 15px;
            border: 4px solid var(--border-color);
            background: var(--accent-bg);
            color: var(--accent-text);
            letter-spacing: 1px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        body[data-theme="y2k"] .tagline {
            background: linear-gradient(135deg, #ff00ff 0%, #ff6ec7 100%);
            backdrop-filter: blur(10px);
        }

        body[data-theme="neon"] .tagline {
            text-shadow: 0 0 10px var(--accent-text);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .game-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin: 15px 0;
        }

        button {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            font-weight: 900;
            padding: 18px 25px;
            border: var(--border-width) solid var(--border-color);
            background: var(--button-bg);
            color: var(--button-text);
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        body[data-theme="y2k"] button {
            background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            backdrop-filter: blur(10px);
        }

        body[data-theme="neon"] button {
            text-shadow: 0 0 10px var(--text-color);
        }

        button:hover {
            background: var(--button-hover-bg);
            color: var(--button-hover-text);
            transform: translateY(-2px);
        }

        body[data-theme="y2k"] button:hover {
            background: linear-gradient(135deg, #ff00ff 0%, #ff6ec7 100%);
            transform: translateY(-3px) scale(1.05);
        }

        body[data-theme="neon"] button:hover {
            box-shadow: 0 0 30px var(--border-color);
        }

        button:active {
            transform: translate(2px, 2px);
        }

        .choice-display {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            gap: 10px;
        }

        .choice-box {
            flex: 1;
            border: var(--border-width) solid var(--border-color);
            padding: 15px 10px;
            text-align: center;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        body[data-theme="y2k"] .choice-box {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }

        body[data-theme="neon"] .choice-box {
            background: rgba(26, 26, 62, 0.5);
        }

        .choice-box h2 {
            font-size: 0.9rem;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .choice-icon {
            font-size: 3rem;
            margin: 10px 0;
        }

        body[data-theme="neon"] .choice-icon {
            filter: drop-shadow(0 0 10px var(--text-color));
        }

        .result {
            border: 6px solid var(--border-color);
            padding: 15px;
            text-align: center;
            margin: 15px 0;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        body[data-theme="y2k"] .result {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        body[data-theme="neon"] .result {
            background: rgba(26, 26, 62, 0.5);
        }

        .result h2 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            letter-spacing: 2px;
        }

        body[data-theme="neon"] .result h2 {
            text-shadow: 0 0 15px var(--text-color);
        }

        .result p {
            font-size: 1rem;
            font-weight: 700;
        }

        .scores {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 40px 0 30px 0;
        }

        .score-box {
            border: 6px solid var(--border-color);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        body[data-theme="y2k"] .score-box {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }

        body[data-theme="neon"] .score-box {
            background: rgba(26, 26, 62, 0.5);
        }

        .score-box h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            letter-spacing: 2px;
            border-bottom: 4px solid var(--border-color);
            padding-bottom: 10px;
        }

        .score-line {
            display: flex;
            justify-content: space-between;
            font-size: 1.1rem;
            font-weight: 700;
            margin: 10px 0;
            padding: 5px 0;
        }

        .reset-btn {
            padding: 15px 30px;
            font-size: 1rem;
            margin-top: 10px;
            display: block;
            width: 100%;
        }

        .hidden {
            visibility: hidden;
        }

        /* iOS Install Overlay */
        .ios-install-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .ios-install-overlay.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .ios-install-card {
            background: #fff;
            color: #000;
            border: 6px solid #000;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            position: relative;
        }

        body[data-theme="y2k"] .ios-install-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(240, 240, 255, 0.95) 100%);
            border-radius: 20px;
            border-color: #ff00ff;
            box-shadow: 0 20px 60px rgba(255, 0, 255, 0.5);
        }

        body[data-theme="neon"] .ios-install-card {
            background: #1a1a3e;
            color: #00ff9f;
            border-color: #00ff9f;
            border-radius: 10px;
            box-shadow: 0 0 40px rgba(0, 255, 159, 0.5);
        }

        .ios-install-card h3 {
            font-size: 1.5rem;
            font-weight: 900;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        body[data-theme="neon"] .ios-install-card h3 {
            text-shadow: 0 0 15px #00ff9f;
        }

        .ios-install-arrow {
            font-size: 4rem;
            margin: 20px 0;
            animation: bounce-arrow 1s ease-in-out infinite;
        }

        @keyframes bounce-arrow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .ios-install-steps {
            text-align: left;
            margin: 20px 0;
        }

        .ios-install-step {
            font-size: 1rem;
            font-weight: 700;
            margin: 15px 0;
            padding: 10px;
            border-left: 4px solid #000;
            padding-left: 15px;
        }

        body[data-theme="y2k"] .ios-install-step {
            border-left-color: #ff00ff;
            background: rgba(255, 0, 255, 0.1);
            border-radius: 5px;
        }

        body[data-theme="neon"] .ios-install-step {
            border-left-color: #ff00ff;
            background: rgba(255, 0, 255, 0.1);
        }

        .ios-close-btn {
            margin-top: 20px;
            padding: 15px 40px;
            font-size: 1rem;
            background: #000;
            color: #fff;
            border: 4px solid #000;
        }

        body[data-theme="y2k"] .ios-close-btn {
            background: linear-gradient(135deg, #ff00ff 0%, #ff6ec7 100%);
            border-color: #ff00ff;
        }

        body[data-theme="neon"] .ios-close-btn {
            background: #ff00ff;
            color: #0f0f23;
            border-color: #ff00ff;
        }

        .ios-close-btn:hover {
            background: #fff;
            color: #000;
        }

        body[data-theme="y2k"] .ios-close-btn:hover {
            background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            color: #fff;
        }

        body[data-theme="neon"] .ios-close-btn:hover {
            background: #00ff9f;
            color: #0f0f23;
            box-shadow: 0 0 30px #00ff9f;
        }

        /* Install Banner - Sticky Bottom with Slide-Up Animation */
        .install-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            border-top: 6px solid var(--border-color);
            padding: 20px;
            background: var(--bg-color);
            box-shadow: 0 -4px 0 var(--border-color);
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }

        body[data-theme="y2k"] .install-banner {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.95) 0%, rgba(118, 75, 162, 0.95) 100%);
            backdrop-filter: blur(10px);
        }

        body[data-theme="neon"] .install-banner {
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(10px);
        }

        .install-banner.show {
            transform: translateY(0);
            animation: bounce 0.6s ease-out;
        }

        @keyframes bounce {
            0% { transform: translateY(100%); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }

        .install-banner-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .install-banner-text {
            flex: 1;
        }

        .install-banner h3 {
            font-size: 1.3rem;
            font-weight: 900;
            margin-bottom: 8px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        body[data-theme="y2k"] .install-banner h3 {
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        body[data-theme="neon"] .install-banner h3 {
            text-shadow: 0 0 15px var(--text-color);
        }

        .install-banner p {
            font-size: 0.95rem;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        body[data-theme="y2k"] .install-banner p {
            color: #fff;
        }

        .install-banner-buttons {
            display: flex;
            gap: 12px;
        }

        .install-btn, .dismiss-btn {
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            font-weight: 900;
            padding: 15px 30px;
            border: var(--border-width) solid var(--border-color);
            background: var(--accent-bg);
            color: var(--accent-text);
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.2s ease;
            letter-spacing: 1px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        body[data-theme="y2k"] .install-btn {
            background: linear-gradient(135deg, #ff00ff 0%, #ff6ec7 100%);
            color: #fff;
        }

        body[data-theme="neon"] .install-btn {
            background: #ff00ff;
            text-shadow: none;
        }

        .install-btn:hover {
            background: var(--button-bg);
            color: var(--button-text);
        }

        body[data-theme="y2k"] .install-btn:hover {
            background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            transform: translateY(-3px);
        }

        body[data-theme="neon"] .install-btn:hover {
            background: #00ff9f;
            color: #0f0f23;
            box-shadow: 0 0 30px #00ff9f;
        }

        .install-btn:active {
            transform: translate(2px, 2px);
        }

        .dismiss-btn {
            background: var(--button-bg);
            color: var(--button-text);
        }

        body[data-theme="y2k"] .dismiss-btn {
            background: rgba(255, 255, 255, 0.9);
            color: #000;
        }

        body[data-theme="neon"] .dismiss-btn {
            background: #1a1a3e;
            color: #00ff9f;
        }

        .dismiss-btn:hover {
            background: var(--accent-bg);
            color: var(--accent-text);
        }

        body[data-theme="y2k"] .dismiss-btn:hover {
            background: linear-gradient(135deg, #ff00ff 0%, #ff6ec7 100%);
            color: #fff;
        }

        body[data-theme="neon"] .dismiss-btn:hover {
            background: #ff00ff;
            color: #0f0f23;
            box-shadow: 0 0 30px #ff00ff;
        }

        .dismiss-btn:active {
            transform: translate(2px, 2px);
        }

        @media (max-width: 768px) {
            .install-banner {
                padding: 15px;
                border-top: 5px solid var(--border-color);
            }

            .install-banner-content {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }

            .install-banner h3 {
                font-size: 1rem;
                margin-bottom: 5px;
                text-align: center;
            }

            .install-banner p {
                font-size: 0.8rem;
                text-align: center;
            }

            .install-banner-buttons {
                flex-direction: row;
                gap: 8px;
            }

            .install-btn, .dismiss-btn {
                font-size: 0.85rem;
                padding: 12px 20px;
                border: 4px solid var(--border-color);
                flex: 1;
            }

            .ios-install-card {
                padding: 20px;
            }

            .ios-install-card h3 {
                font-size: 1.2rem;
            }

            .ios-install-step {
                font-size: 0.9rem;
            }
        }

        footer {
            border-top: 6px solid var(--border-color);
            margin-top: 50px;
            padding: 30px 20px;
            text-align: center;
        }

        body[data-theme="y2k"] footer {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
        }

        body[data-theme="neon"] footer {
            background: rgba(26, 26, 62, 0.5);
        }

        footer p {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        footer a {
            color: var(--text-color);
            text-decoration: none;
            border-bottom: 3px solid var(--border-color);
            font-weight: 900;
        }

        footer a:hover {
            background: var(--accent-bg);
            color: var(--accent-text);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
                padding: 12px;
                margin-bottom: 6px;
                letter-spacing: 2px;
            }

            .tagline {
                font-size: 0.7rem;
                padding: 8px;
                margin-bottom: 12px;
                letter-spacing: 0.5px;
            }

            .game-buttons {
                gap: 8px;
                margin: 12px 0;
            }

            button {
                font-size: 1rem;
                padding: 15px 20px;
                border: 4px solid var(--border-color);
            }

            .choice-display {
                margin: 12px 0;
                gap: 8px;
            }

            .choice-box {
                padding: 12px 8px;
                border: 4px solid var(--border-color);
            }

            .choice-box h2 {
                font-size: 0.75rem;
                margin-bottom: 6px;
            }

            .choice-icon {
                font-size: 2.5rem;
                margin: 8px 0;
            }

            .result {
                padding: 12px;
                margin: 12px 0;
                min-height: 70px;
                border: 5px solid var(--border-color);
            }

            .result h2 {
                font-size: 1.5rem;
                margin-bottom: 4px;
            }

            .result p {
                font-size: 0.9rem;
            }

            .scores {
                grid-template-columns: 1fr;
                margin-top: 50px;
            }

            .score-box {
                padding: 20px;
            }
        }
    </style>
</head>
<body data-theme="brutalist">
    <!-- Theme Toggle -->
    <div class="theme-toggle">
        <button class="theme-btn active" data-theme="brutalist">BRUTAL</button>
        <button class="theme-btn" data-theme="y2k">Y2K</button>
        <button class="theme-btn" data-theme="neon">NEON</button>
    </div>

    <!-- iOS Install Overlay -->
    <div class="ios-install-overlay" id="iosInstallOverlay">
        <div class="ios-install-card">
            <h3>INSTALL TO HOME SCREEN</h3>
            <div class="ios-install-arrow">⬆️</div>
            <div class="ios-install-steps">
                <div class="ios-install-step">1. TAP THE SHARE BUTTON ⬆️ AT THE BOTTOM</div>
                <div class="ios-install-step">2. SCROLL DOWN AND TAP "ADD TO HOME SCREEN"</div>
                <div class="ios-install-step">3. TAP "ADD" TO COMPLETE INSTALLATION</div>
            </div>
            <button class="ios-close-btn" onclick="closeIOSOverlay()">GOT IT</button>
        </div>
    </div>

    <div class="container">
        <h1>VERA'S ROCK PAPER SCISSORS BATTLE</h1>
        <div class="tagline">BECAUSE CHATGPT CAN'T PLAY FAIR — THIS COMPUTER ACTUALLY GOES FIRST</div>

        <!-- Install Banner -->
        <div class="install-banner" id="installBanner">
            <div class="install-banner-content">
                <div class="install-banner-text">
                    <h3>📱 INSTALL AS APP</h3>
                    <p>ADD TO HOME SCREEN FOR OFFLINE PLAY</p>
                </div>
                <div class="install-banner-buttons">
                    <button class="install-btn" id="installBtn">INSTALL</button>
                    <button class="dismiss-btn" id="dismissBtn">NOT NOW</button>
                </div>
            </div>
        </div>

        <div class="game-buttons">
            <button onclick="play('rock')">✊ ROCK</button>
            <button onclick="play('paper')">📄 PAPER</button>
            <button onclick="play('scissors')">✂️ SCISSORS</button>
        </div>

        <div class="choice-display">
            <div class="choice-box">
                <h2>YOU CHOSE</h2>
                <div class="choice-icon" id="playerChoice">❓</div>
                <p id="playerText">MAKE YOUR MOVE</p>
            </div>
            <div class="choice-box">
                <h2>COMPUTER CHOSE</h2>
                <div class="choice-icon" id="computerChoice">❓</div>
                <p id="computerText">WAITING...</p>
            </div>
        </div>

        <div class="result" id="result">
            <h2>READY TO BATTLE</h2>
            <p>CHOOSE YOUR WEAPON</p>
        </div>

        <div class="scores">
            <div class="score-box">
                <h3>SESSION SCORE</h3>
                <div class="score-line">
                    <span>WINS:</span>
                    <span id="sessionWins">0</span>
                </div>
                <div class="score-line">
                    <span>LOSSES:</span>
                    <span id="sessionLosses">0</span>
                </div>
                <div class="score-line">
                    <span>DRAWS:</span>
                    <span id="sessionDraws">0</span>
                </div>
            </div>
            <div class="score-box">
                <h3>ALL-TIME SCORE</h3>
                <div class="score-line">
                    <span>WINS:</span>
                    <span id="allTimeWins">0</span>
                </div>
                <div class="score-line">
                    <span>LOSSES:</span>
                    <span id="allTimeLosses">0</span>
                </div>
                <div class="score-line">
                    <span>DRAWS:</span>
                    <span id="allTimeDraws">0</span>
                </div>
                <button class="reset-btn" onclick="resetAllTime()">RESET ALL-TIME</button>
            </div>
        </div>
    </div>

    <script>
        // Theme Management
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'brutalist';
            setTheme(savedTheme);
        }

        function setTheme(theme) {
            document.body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);

            // Update active state on buttons
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-theme') === theme) {
                    btn.classList.add('active');
                }
            });
        }

        // Theme toggle event listeners
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.getAttribute('data-theme');
                setTheme(theme);
            });
        });

        // Initialize theme on load
        initTheme();

        // Game state
        const choices = ['rock', 'paper', 'scissors'];
        const icons = {
            rock: '✊',
            paper: '📄',
            scissors: '✂️'
        };
        const names = {
            rock: 'ROCK',
            paper: 'PAPER',
            scissors: 'SCISSORS'
        };

        // Session scores
        let sessionScore = {
            wins: 0,
            losses: 0,
            draws: 0
        };

        // Load all-time scores from localStorage
        function loadAllTimeScore() {
            const saved = localStorage.getItem('rpsAllTimeScore');
            if (saved) {
                return JSON.parse(saved);
            }
            return { wins: 0, losses: 0, draws: 0 };
        }

        // Save all-time scores to localStorage
        function saveAllTimeScore(score) {
            localStorage.setItem('rpsAllTimeScore', JSON.stringify(score));
        }

        let allTimeScore = loadAllTimeScore();

        // Update score displays
        function updateScores() {
            document.getElementById('sessionWins').textContent = sessionScore.wins;
            document.getElementById('sessionLosses').textContent = sessionScore.losses;
            document.getElementById('sessionDraws').textContent = sessionScore.draws;
            document.getElementById('allTimeWins').textContent = allTimeScore.wins;
            document.getElementById('allTimeLosses').textContent = allTimeScore.losses;
            document.getElementById('allTimeDraws').textContent = allTimeScore.draws;
        }

        // Determine winner
        function getWinner(player, computer) {
            if (player === computer) return 'draw';
            if (
                (player === 'rock' && computer === 'scissors') ||
                (player === 'paper' && computer === 'rock') ||
                (player === 'scissors' && computer === 'paper')
            ) {
                return 'win';
            }
            return 'lose';
        }

        // Get cheesy messages
        function getMessage(result) {
            const messages = {
                win: [
                    'YOU ATE AND LEFT NO CRUMBS!',
                    'SLAY QUEEN! NO CAP!',
                    'GIVING MAIN CHARACTER ENERGY',
                    "IT'S THE REBELLION FOR ME",
                    'PERIODT. YOU UNDERSTOOD THE ASSIGNMENT.',
                    "SHAKE IT OFF? NAH, YOU SHOOK 'EM OFF!",
                    'THIS IS WHY WE FIGHT',
                    "WHEN THE TRUTH HURTS...IT'S TRUE (YOU WON)",
                    'ONE ROUND OF APPLAUSE FOR YOU',
                    'LIVING RENT FREE IN THE COMPUTER\'S HEAD'
                ],
                lose: [
                    'NOT THE VIBE. TRY AGAIN BESTIE.',
                    'THIS IS YOUR VILLAIN ERA',
                    "YOU'RE IN YOUR FOLKLORE ERA (LOSING)",
                    'THE CALL IS COMING FROM INSIDE THE HOUSE',
                    'EVEN THE ROSES ARE WILTING',
                    'THAT\'S ROUGH BUDDY',
                    'THE REBELLION DOESN\'T ALWAYS WIN BATTLES',
                    'CLOSE YOUR EYES AND COUNT TO TEN',
                    'MAYBE THE COMPUTER DESERVES THE ROSE',
                    'FR FR, THAT WAS TOUGH'
                ],
                draw: [
                    'WE BOTH CHOSE CHAOS. RESPECT.',
                    "IT'S GIVING STALEMATE",
                    'NO ROSES FOR ANYONE TODAY',
                    'TWIN! WE MATCHED ENERGY',
                    'THE REBELLION AND EMPIRE: TIED',
                    'SAME WAVELENGTH, DIFFERENT OUTCOME',
                    'MID. JUST MID.',
                    'THIS LOVE LEFT US TIED',
                    'NEITHER OF US GOT THE ROSE',
                    'PERFECTLY BALANCED, AS ALL THINGS SHOULD BE'
                ]
            };
            const msgs = messages[result];
            return msgs[Math.floor(Math.random() * msgs.length)];
        }

        // Main game logic
        function play(playerChoice) {
            const computerChoice = choices[Math.floor(Math.random() * choices.length)];
            const result = getWinner(playerChoice, computerChoice);

            // Update displays
            document.getElementById('playerChoice').textContent = icons[playerChoice];
            document.getElementById('playerText').textContent = names[playerChoice];
            document.getElementById('computerChoice').textContent = icons[computerChoice];
            document.getElementById('computerText').textContent = names[computerChoice];

            // Update result
            const resultDiv = document.getElementById('result');
            const resultTitle = resultDiv.querySelector('h2');
            const resultText = resultDiv.querySelector('p');

            if (result === 'win') {
                resultTitle.textContent = 'YOU WIN!';
                sessionScore.wins++;
                allTimeScore.wins++;
            } else if (result === 'lose') {
                resultTitle.textContent = 'YOU LOSE!';
                sessionScore.losses++;
                allTimeScore.losses++;
            } else {
                resultTitle.textContent = 'DRAW!';
                sessionScore.draws++;
                allTimeScore.draws++;
            }

            resultText.textContent = getMessage(result);

            // Save and update scores
            saveAllTimeScore(allTimeScore);
            updateScores();
        }

        // Reset all-time scores
        function resetAllTime() {
            if (confirm('RESET ALL-TIME SCORES? THIS CANNOT BE UNDONE.')) {
                allTimeScore = { wins: 0, losses: 0, draws: 0 };
                saveAllTimeScore(allTimeScore);
                updateScores();
            }
        }

        // Initialize on load
        updateScores();

        // iOS Install Overlay Functions
        function showIOSOverlay() {
            document.getElementById('iosInstallOverlay').classList.add('show');
        }

        function closeIOSOverlay() {
            document.getElementById('iosInstallOverlay').classList.remove('show');
            // Mark as dismissed
            localStorage.setItem('installBannerDismissed', 'true');
            resetSessionCount();
        }

        // PWA Install Banner Logic
        let deferredPrompt;
        const installBanner = document.getElementById('installBanner');
        const installBtn = document.getElementById('installBtn');
        const dismissBtn = document.getElementById('dismissBtn');

        // Check if app is already installed or running in standalone mode
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches
                          || window.navigator.standalone
                          || document.referrer.includes('android-app://');

        // Session counting logic
        function incrementSessionCount() {
            let sessionCount = parseInt(localStorage.getItem('bannerSessionCount') || '0');
            sessionCount++;
            localStorage.setItem('bannerSessionCount', sessionCount.toString());
            return sessionCount;
        }

        function resetSessionCount() {
            localStorage.setItem('bannerSessionCount', '0');
        }

        // Check dismissal status
        const bannerDismissed = localStorage.getItem('installBannerDismissed') === 'true';
        const currentSessionCount = incrementSessionCount();

        // Reset dismissal after 10 sessions
        if (bannerDismissed && currentSessionCount >= 10) {
            localStorage.removeItem('installBannerDismissed');
            resetSessionCount();
        }

        // Should we show the banner?
        const shouldShowBanner = !isStandalone && (!bannerDismissed || currentSessionCount >= 10);

        // Detect iOS
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

        // Capture the beforeinstallprompt event
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;

            // Show install banner if conditions are met
            if (shouldShowBanner) {
                setTimeout(() => {
                    installBanner.classList.add('show');
                }, 1000); // Slight delay for dramatic effect
            }
        });

        // Install button click handler
        installBtn.addEventListener('click', async () => {
            if (isIOS) {
                // Show iOS-specific overlay tutorial
                installBanner.classList.remove('show');
                showIOSOverlay();
                return;
            }

            if (!deferredPrompt) {
                // Fallback for browsers that don't support beforeinstallprompt
                alert('To install:\n\niOS: Tap Share → Add to Home Screen\nAndroid: Tap Menu → Install app\nDesktop: Look for install icon in address bar');
                return;
            }

            // Show the install prompt
            deferredPrompt.prompt();

            // Wait for the user to respond to the prompt
            const { outcome } = await deferredPrompt.userChoice;

            console.log(`User response: ${outcome}`);

            // Hide the banner regardless of outcome
            installBanner.classList.remove('show');

            // If user accepted, mark as dismissed
            if (outcome === 'accepted') {
                localStorage.setItem('installBannerDismissed', 'true');
                resetSessionCount();
            }

            // Clear the deferredPrompt
            deferredPrompt = null;
        });

        // Dismiss button click handler
        dismissBtn.addEventListener('click', () => {
            installBanner.classList.remove('show');
            // Mark as dismissed and reset session count
            localStorage.setItem('installBannerDismissed', 'true');
            resetSessionCount();
        });

        // For iOS Safari and other browsers that don't support beforeinstallprompt
        // Show banner after a delay if conditions are met
        if (shouldShowBanner) {
            const isSupported = isIOS || /Android/.test(navigator.userAgent) || /Chrome/.test(navigator.userAgent);

            if (isSupported && !deferredPrompt) {
                setTimeout(() => {
                    // Only show if beforeinstallprompt hasn't fired
                    if (!installBanner.classList.contains('show')) {
                        installBanner.classList.add('show');
                    }
                }, 2000); // Show after 2 seconds
            }
        }
    </script>

    <footer>
        <p>&copy; 2025 Neel Ketkar. ALL RIGHTS RESERVED.</p>
        <p>READ THE <a href="https://sparrowfm.github.io/sparrow/posts/building-veras-rock-paper-scissors-battle.html" target="_blank" rel="noopener">STORY BEHIND THIS GAME</a></p>
    </footer>

    <!-- Analytics -->
    <script data-goatcounter="https://sparrowfm.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered successfully:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
